openapi: '3.0.2'
info:
  title: Blueye HTTP API
  version: '1.0.0'
servers:
  - url: http://192.168.1.101/

paths:
  /diagnostics/drone_info:
    get:
      summary: Drone information
      description: |
        Returns a JSON string of drone information. Using this endpoint is the easiest way to check
        if there is a drone connected to your network.
      responses:
        '200':
          description: A JSON string of drone information.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DroneInfo'

  /logcsv:
    get:
      summary: Returns a list of logs on the drone.
      responses:
        '200':
          description: Array of logs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Log'

  /logcsv/{filename}:
    get:
      summary: Returns a comma-separated-value file with the requested name
      parameters:
        - name: filename
          in: path
          description: Filename of log to download
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Comma-separated-value file with log data
          content:
            text/csv:
              schema:
                type: string

components:
  schemas:
    DroneInfo:
      type: object
      properties:
        commit_id_csys:
          type: string
        features:
          type: string
        hardware_id:
          type: string
        manufacturer:
          type: string
        model_description:
          type: string
        model_name:
          type: string
        model_url:
          type: string
        operating_system:
          type: string
        serial_number:
          type: string
        sw_version:
          type: string

    Log:
      type: object
      properties:
        name:
          type: string
        binsize:
          type: integer
        timestamp:
          type: string
        maxdepth:
          type: number
          format: float
