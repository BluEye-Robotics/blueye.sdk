



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../docs/media/blueye_b.svg">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-4.6.3">
    
    
      
        <title>Logs - Blueye SDK</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#module-blueyesdklogs" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="Blueye SDK" aria-label="Blueye SDK" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../../../docs/media/blueye_b.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Blueye SDK
            </span>
            <span class="md-header-nav__topic">
              
                Logs
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/BluEye-Robotics/blueye.sdk/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="Blueye SDK" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../../../docs/media/blueye_b.svg" width="48" height="48">
      
    </a>
    Blueye SDK
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/BluEye-Robotics/blueye.sdk/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="About the Blueye Drones" class="md-nav__link">
      About the Blueye Drones
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../docs/quick_start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Movement
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Movement
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../docs/movement/from-the-CLI/" title="Control from the CLI" class="md-nav__link">
      Control from the CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../docs/movement/with-a-gamepad/" title="Control with a gamepad" class="md-nav__link">
      Control with a gamepad
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Video
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Video
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../docs/video/gstreamer-for-video-streaming/" title="GStreamer for video streaming" class="md-nav__link">
      GStreamer for video streaming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../docs/video/downloading/" title="Downloading videos and images" class="md-nav__link">
      Downloading videos and images
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Logs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Logs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../docs/logs/listing-and-downloading/" title="Listing and downloading log files" class="md-nav__link">
      Listing and downloading log files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../docs/logs/log-file-format/" title="Log file format" class="md-nav__link">
      Log file format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../docs/logs/plotting/" title="Plotting log files" class="md-nav__link">
      Plotting log files
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../docs/configuration/" title="Configure drone parameters" class="md-nav__link">
      Configure drone parameters
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../docs/http-api.html" title="HTTP API" class="md-nav__link">
      HTTP API
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1" checked>
    
    <label class="md-nav__link" for="nav-8-1">
      Blueye
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        Blueye
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1-1" type="checkbox" id="nav-8-1-1" checked>
    
    <label class="md-nav__link" for="nav-8-1-1">
      Sdk
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-8-1-1">
        Sdk
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../camera/" title="Camera" class="md-nav__link">
      Camera
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../constants/" title="Constants" class="md-nav__link">
      Constants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../drone/" title="Drone" class="md-nav__link">
      Drone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Index" class="md-nav__link">
      Index
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Logs
      </label>
    
    <a href="./" title="Logs" class="md-nav__link md-nav__link--active">
      Logs
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logfile" class="md-nav__link">
    LogFile
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download" class="md-nav__link">
    download
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    Logs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refresh_log_index" class="md-nav__link">
    refresh_log_index
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../motion/" title="Motion" class="md-nav__link">
      Motion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../utils/" title="Utils" class="md-nav__link">
      Utils
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logfile" class="md-nav__link">
    LogFile
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#download" class="md-nav__link">
    download
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    Logs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refresh_log_index" class="md-nav__link">
    refresh_log_index
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/BluEye-Robotics/blueye.sdk/edit/master/reference/blueye/sdk/logs.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="module-blueyesdklogs">Module blueye.sdk.logs</h1>
<details class="example">
<summary>View Source</summary>
<pre><code>from datetime import datetime

import requests

import tabulate

class LogFile:

    """

    This class is a container for a log file stored on the drone

    The drone lists the file name, max depth, start time, and file size for each log,

    and you can show this information by printing the log object, eg. on a Drone

    object called `myDrone`:

    ```

    print(myDrone.logs[0])

    ```

    or, if you want to display the header you can format the object with `with_header`:

    ```

    print(f"{myDrone.logs[0]:with_header}")

    ```

    Calling the download() method on a log object will pull the CSV (Comma Separated

    Value) file from the drone to your local filesystem.

    """

    def __init__(self, maxdepth, name, timestamp, binsize, ip):

        self.maxdepth = maxdepth

        self.name = name

        self.timestamp = datetime.fromisoformat(timestamp)

        self.binsize = binsize

        self.download_path = "http://" + ip + "/logcsv/" + name

        self._formatted_values = [

            self.name,

            self.timestamp.strftime("%d. %b %Y %H:%M"),

            f"{self.maxdepth/1000:.2f} m",

            self._human_readable_filesize(),

        ]

    def _human_readable_filesize(self):

        suffix = "B"

        num = self.binsize

        for unit in ["", "Ki", "Mi"]:

            if abs(num) &lt; 1024.0:

                return f"{num:3.1f} {unit}{suffix}"

            num /= 1024.0

        return f"{num:.1f} Gi{suffix}"

    def download(self, output_path=None, output_name=None):

        """

        Download the specified log to your local file system

        If you specify an output_path the log file will be downloaded to that directory

        instead of the current one.

        Specifying output_name will overwrite the default file name with whatever you

        have specified (be sure to include the .csv extension).

        """

        log = requests.get(self.download_path).content

        if output_path is None:

            output_path = "./"

        if output_name is None:

            output_name = self.name

        with open(f"{output_path}{output_name}", "wb") as f:

            f.write(log)

    def __format__(self, format_specifier):

        if format_specifier == "with_header":

            return tabulate.tabulate(

                [self], headers=["Name", "Time", "Max depth", "Size"], tablefmt="plain"

            )

        else:

            return tabulate.tabulate([self], tablefmt="plain")

    def __str__(self):

        return f"{self}"

    def __getitem__(self, item):

        return self._formatted_values[item]

class Logs:

    """This class is an index of the log files stored on the drone

    To show the available logs you simply print this object, ie. if your Drone object

    is called `myDrone`, you can do:

    ```

    print(myDrone.logs)

    ```

    This will print a list of all available logs, with some of their metadata, such as

    name and maxdepth.

    You can access logfile objects either by index or by name. Eg. if you want the first

    logfile in the list you can do `myDrone.logs[0]`, or if you want some particular log you

    can do `myDrone.logs["exampleName0001.csv"]`. You can even give it a slice, so if you want

    the last 10 logs you can do `myDrone.logs[:-10]`.

    """

    def __init__(self, parent_drone, auto_download_index=False):

        self.ip = parent_drone._ip

        self._parent_drone = parent_drone

        self.index_downloaded = False

        if auto_download_index:

            self.refresh_log_index()

        else:

            self._logs = {}

    def _get_list_of_logs_from_drone(self):

        list_of_dictionaries = requests.get("http://" + self.ip + "/logcsv").json()

        return list_of_dictionaries

    def _build_log_files_from_dictionary(self, list_of_logs_in_dictionaries):

        loglist = {}

        for log in list_of_logs_in_dictionaries:

            loglist[log["name"]] = LogFile(

                log["maxdepth"], log["name"], log["timestamp"], log["binsize"], self.ip

            )

        return loglist

    def refresh_log_index(self):

        """Refresh the log index from the drone

        This is method is run on the first log access by default, but if you would like to check

        for new log files it can be called at any time.

        """

        list_of_logs_in_dictionaries = self._get_list_of_logs_from_drone()

        self._logs = self._build_log_files_from_dictionary(list_of_logs_in_dictionaries)

        self.index_downloaded = True

    def __getitem__(self, item):

        if not self.index_downloaded:

            self.refresh_log_index()

        if type(item) == str:

            try:

                return self._logs[item]

            except KeyError:

                raise KeyError(f"A log with the name '{item}' does not exist")

        else:

            try:

                return list(self._logs.values())[item]

            except IndexError:

                raise IndexError(

                    f"Tried to access log nr {item}, "

                    + f"but there are only {len(self._logs.values())} logs available"

                )

    def __str__(self):

        return tabulate.tabulate(

            self, headers=["Name", "Time", "Max depth", "Size"], tablefmt="plain"

        )
</code></pre>
</details>
<h2 id="classes">Classes</h2>
<h3 id="logfile">LogFile</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LogFile</span><span class="p">(</span>
    <span class="n">maxdepth</span><span class="p">,</span>
    <span class="n">name</span><span class="p">,</span>
    <span class="n">timestamp</span><span class="p">,</span>
    <span class="n">binsize</span><span class="p">,</span>
    <span class="n">ip</span>
<span class="p">)</span>
</code></pre></div>
<p>This class is a container for a log file stored on the drone</p>
<p>The drone lists the file name, max depth, start time, and file size for each log,
and you can show this information by printing the log object, eg. on a Drone
object called <code>myDrone</code>:</p>
<div class="highlight"><pre><span></span><code>print(myDrone.logs[0])
</code></pre></div>
<p>or, if you want to display the header you can format the object with <code>with_header</code>:</p>
<div class="highlight"><pre><span></span><code>print(f&quot;{myDrone.logs[0]:with_header}&quot;)
</code></pre></div>
<p>Calling the download() method on a log object will pull the CSV (Comma Separated
Value) file from the drone to your local filesystem.</p>
<details class="example">
<summary>View Source</summary>
<pre><code>class LogFile:

    """

    This class is a container for a log file stored on the drone

    The drone lists the file name, max depth, start time, and file size for each log,

    and you can show this information by printing the log object, eg. on a Drone

    object called `myDrone`:

    ```

    print(myDrone.logs[0])

    ```

    or, if you want to display the header you can format the object with `with_header`:

    ```

    print(f"{myDrone.logs[0]:with_header}")

    ```

    Calling the download() method on a log object will pull the CSV (Comma Separated

    Value) file from the drone to your local filesystem.

    """

    def __init__(self, maxdepth, name, timestamp, binsize, ip):

        self.maxdepth = maxdepth

        self.name = name

        self.timestamp = datetime.fromisoformat(timestamp)

        self.binsize = binsize

        self.download_path = "http://" + ip + "/logcsv/" + name

        self._formatted_values = [

            self.name,

            self.timestamp.strftime("%d. %b %Y %H:%M"),

            f"{self.maxdepth/1000:.2f} m",

            self._human_readable_filesize(),

        ]

    def _human_readable_filesize(self):

        suffix = "B"

        num = self.binsize

        for unit in ["", "Ki", "Mi"]:

            if abs(num) &lt; 1024.0:

                return f"{num:3.1f} {unit}{suffix}"

            num /= 1024.0

        return f"{num:.1f} Gi{suffix}"

    def download(self, output_path=None, output_name=None):

        """

        Download the specified log to your local file system

        If you specify an output_path the log file will be downloaded to that directory

        instead of the current one.

        Specifying output_name will overwrite the default file name with whatever you

        have specified (be sure to include the .csv extension).

        """

        log = requests.get(self.download_path).content

        if output_path is None:

            output_path = "./"

        if output_name is None:

            output_name = self.name

        with open(f"{output_path}{output_name}", "wb") as f:

            f.write(log)

    def __format__(self, format_specifier):

        if format_specifier == "with_header":

            return tabulate.tabulate(

                [self], headers=["Name", "Time", "Max depth", "Size"], tablefmt="plain"

            )

        else:

            return tabulate.tabulate([self], tablefmt="plain")

    def __str__(self):

        return f"{self}"

    def __getitem__(self, item):

        return self._formatted_values[item]
</code></pre>
</details>
<hr />
<h4 id="methods">Methods</h4>
<h5 id="download">download</h5>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">download</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">output_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">output_name</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>
Download the specified log to your local file system</p>
<p>If you specify an output_path the log file will be downloaded to that directory
instead of the current one.</p>
<p>Specifying output_name will overwrite the default file name with whatever you
have specified (be sure to include the .csv extension).</p>
<details class="example">
<summary>View Source</summary>
<pre><code>    def download(self, output_path=None, output_name=None):

        """

        Download the specified log to your local file system

        If you specify an output_path the log file will be downloaded to that directory

        instead of the current one.

        Specifying output_name will overwrite the default file name with whatever you

        have specified (be sure to include the .csv extension).

        """

        log = requests.get(self.download_path).content

        if output_path is None:

            output_path = "./"

        if output_name is None:

            output_name = self.name

        with open(f"{output_path}{output_name}", "wb") as f:

            f.write(log)
</code></pre>
</details>
<h3 id="logs">Logs</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Logs</span><span class="p">(</span>
    <span class="n">parent_drone</span><span class="p">,</span>
    <span class="n">auto_download_index</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>
<p>This class is an index of the log files stored on the drone</p>
<p>To show the available logs you simply print this object, ie. if your Drone object
is called <code>myDrone</code>, you can do:</p>
<div class="highlight"><pre><span></span><code>print(myDrone.logs)
</code></pre></div>
<p>This will print a list of all available logs, with some of their metadata, such as
name and maxdepth.</p>
<p>You can access logfile objects either by index or by name. Eg. if you want the first
logfile in the list you can do <code>myDrone.logs[0]</code>, or if you want some particular log you
can do <code>myDrone.logs["exampleName0001.csv"]</code>. You can even give it a slice, so if you want
the last 10 logs you can do <code>myDrone.logs[:-10]</code>.</p>
<details class="example">
<summary>View Source</summary>
<pre><code>class Logs:

    """This class is an index of the log files stored on the drone

    To show the available logs you simply print this object, ie. if your Drone object

    is called `myDrone`, you can do:

    ```

    print(myDrone.logs)

    ```

    This will print a list of all available logs, with some of their metadata, such as

    name and maxdepth.

    You can access logfile objects either by index or by name. Eg. if you want the first

    logfile in the list you can do `myDrone.logs[0]`, or if you want some particular log you

    can do `myDrone.logs["exampleName0001.csv"]`. You can even give it a slice, so if you want

    the last 10 logs you can do `myDrone.logs[:-10]`.

    """

    def __init__(self, parent_drone, auto_download_index=False):

        self.ip = parent_drone._ip

        self._parent_drone = parent_drone

        self.index_downloaded = False

        if auto_download_index:

            self.refresh_log_index()

        else:

            self._logs = {}

    def _get_list_of_logs_from_drone(self):

        list_of_dictionaries = requests.get("http://" + self.ip + "/logcsv").json()

        return list_of_dictionaries

    def _build_log_files_from_dictionary(self, list_of_logs_in_dictionaries):

        loglist = {}

        for log in list_of_logs_in_dictionaries:

            loglist[log["name"]] = LogFile(

                log["maxdepth"], log["name"], log["timestamp"], log["binsize"], self.ip

            )

        return loglist

    def refresh_log_index(self):

        """Refresh the log index from the drone

        This is method is run on the first log access by default, but if you would like to check

        for new log files it can be called at any time.

        """

        list_of_logs_in_dictionaries = self._get_list_of_logs_from_drone()

        self._logs = self._build_log_files_from_dictionary(list_of_logs_in_dictionaries)

        self.index_downloaded = True

    def __getitem__(self, item):

        if not self.index_downloaded:

            self.refresh_log_index()

        if type(item) == str:

            try:

                return self._logs[item]

            except KeyError:

                raise KeyError(f"A log with the name '{item}' does not exist")

        else:

            try:

                return list(self._logs.values())[item]

            except IndexError:

                raise IndexError(

                    f"Tried to access log nr {item}, "

                    + f"but there are only {len(self._logs.values())} logs available"

                )

    def __str__(self):

        return tabulate.tabulate(

            self, headers=["Name", "Time", "Max depth", "Size"], tablefmt="plain"

        )
</code></pre>
</details>
<hr />
<h4 id="methods_1">Methods</h4>
<h5 id="refresh_log_index">refresh_log_index</h5>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">refresh_log_index</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>
Refresh the log index from the drone</p>
<p>This is method is run on the first log access by default, but if you would like to check
for new log files it can be called at any time.</p>
<details class="example">
<summary>View Source</summary>
<pre><code>    def refresh_log_index(self):

        """Refresh the log index from the drone

        This is method is run on the first log access by default, but if you would like to check

        for new log files it can be called at any time.

        """

        list_of_logs_in_dictionaries = self._get_list_of_logs_from_drone()

        self._logs = self._build_log_files_from_dictionary(list_of_logs_in_dictionaries)

        self.index_downloaded = True
</code></pre>
</details>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="Index" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Index
              </span>
            </div>
          </a>
        
        
          <a href="../motion/" title="Motion" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Motion
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>